{% extends 'list.html' %}
{% load static %}
{% load psat_filter %}
{% load partials %}

{% startpartial category_tab %}
    {% if category_list %}
        {% for category in category_list %}
            <button class="nav-link p-2{% if category.choice == 0 %} active{% endif %}"
                    id="navCategory{{ category.choice }}" type="button" role="tab"
                    data-bs-toggle="tab" data-bs-target="#navContent{{ category.choice }}"
                    aria-controls="navContent{{ category.choice }}"
                    aria-selected="{% if category.choice == 0 %}true{% else %}false{% endif %}">
                <span class="fw-bold small text-primary"
                      {% if category.choice != 0 %}
                      hx-get="{{ category.url }}" hx-target="#navContent{{ category.choice }}"
                      hx-trigger="load delay:0.5s"{% endif %}>
                    {{ category.name }}
                </span>
            </button>
        {% endfor %}
    {% endif %}
{% endpartial %}

{% startpartial category_content %}
    {% if category_list %}
        {% for category in category_list %}
            <div class="tab-pane fade{% if category.choice == 0 %} show active{% endif %}"
                 id="navContent{{ category.choice }}" role="tabpanel"
                 aria-labelledby="navCategory{{ category.choice }}">
                {% if category.choice == 0 %}
                    {% include 'board/post_list_content.html' %}
                {% else %}
                {% endif %}
            </div><!-- Category{{ category.choice }} End -->
        {% endfor %}
    {% endif %}
{% endpartial %}

{% block head_title %}{{ info.title }}{% endblock head_title %}

{% block main %}
<section id="{{ info.target_id }}">
    <div id="info">{{ info|json_script:info }}</div>
    <div class="pagetitle my-2">
        <h1>
            {{ info.icon|safe }}
            {{ info.title }}
        </h1>
    </div><!-- Page Title End -->

    <section class="section">
        <div class="row">
            <div class="col-12 my-2">
                <div class="card m-0">
                    <div class="card-body">
                        <nav class="mt-4">
                            <div class="nav nav-tabs" id="nav-tab" role="tablist">
                                {% partial category_tab %}
                            </div>
                        </nav><!-- Navigation End -->
                        <div class="tab-content" id="nav-tabContent">
                            {% partial category_content %}
                        </div><!-- Category End -->
                    </div>
                </div>
            </div>
        </div><!-- Content Row End -->
    </section>
</section><!-- Main Content End -->
{% endblock %}

{% block page_script %}
    <script type="module" src="{% static 'js/board.js' %}"></script>
{% endblock %}
