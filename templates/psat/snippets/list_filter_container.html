{% load static %}
{% load psat_filter %}
{% load partials %}

{% startpartial problem %}
    <a id="dropdownYearLink{{ info.category }}" href="" role="button"
       class="btn btn-sm btn-outline-primary dropdown-toggle"
       data-bs-toggle="dropdown" aria-expanded="false">
        {{ PSAT_ICON_SET.filter|safe }}
    </a>
    <ul class="dropdown-menu" aria-labelledby="dropdownYearLink{{ info.category }}">
        <div class="d-flex col-12 col-lg-4 flex-wrap justify-content-start"
             hx-target="#navContent{{ info.category|default:0 }}"
             hx-swap="innerHTML swap:0.25s" style="min-width: 300px;">
        {% if url.year == '전체' %}
            <li class="col-3 p-0">
                <a class="p-1 dropdown-item text-nowrap text-center active" href=""
                   hx-get="{% url 'psat:problem_list' year='전체' ex='전체' sub=url.sub %}">
                    전체 연도
                </a>
            </li>
        {% else %}
            <li class="col-3 p-0">
                <a class="p-1 dropdown-item text-nowrap text-center" href=""
                   hx-get="{% url 'psat:problem_list' year='전체' ex='전체' sub=url.sub %}">
                    전체 연도
                </a>
            </li>
        {% endif %}
        {% for t in TOTAL.year_list %}
            {% if t == url.year %}
            <li class="col-3 p-0">
                <a class="p-1 dropdown-item text-nowrap text-center active" href=""
                   hx-get="{% url 'psat:problem_list' year=t ex='전체' sub=url.sub %}">
                    {{ t }}년
                </a>
            </li>
            {% else %}
            <li class="col-3 p-0">
                <a class="p-1 dropdown-item text-nowrap text-center" href=""
                   hx-get="{% url 'psat:problem_list' year=t ex='전체' sub=url.sub %}">
                    {{ t }}년
                </a>
            </li>
            {% endif %}
        {% endfor %}
        </div>
    </ul>

    <a class="btn btn-outline-primary btn-sm dropdown-toggle" href=""
       role="button" id="dropdownExamLink{{ info.category }}"
       data-bs-toggle="dropdown" aria-expanded="false">
        {{ PSAT_ICON_SET.filter|safe }}
    </a>
    <ul class="dropdown-menu" aria-labelledby="dropdownExamLink{{ info.category }}">
        <div class="d-flex col-12 col-lg-4 flex-wrap justify-content-start"
             hx-target="#navContent{{ info.category|default:0 }}"
             hx-swap="innerHTML swap:0.25s" style="min-width: 300px;">
        {% if url.ex == '전체' %}
            <li class="col-6 p-0">
                <a class="p-1 dropdown-item text-nowrap text-center active" href=""
                   hx-get="{% url 'psat:problem_list' year='전체' ex='전체' sub=url.sub %}">
                    전체 시험
                </a>
            </li>
        {% else %}
            <li class="col-6 p-0">
                <a class="p-1 dropdown-item text-nowrap text-center" href=""
                   hx-get="{% url 'psat:problem_list' year='전체' ex='전체' sub=url.sub %}">
                    전체 시험
                </a>
            </li>
        {% endif %}
        {% for t in TOTAL.exam_list %}
            {% if t.ex == url.ex %}
            <li class="col-6 p-0">
                <a class="p-1 dropdown-item text-nowrap text-center active" href=""
                   hx-get="{% url 'psat:problem_list' year='전체' ex=t.ex sub=url.sub %}">
                    {{ t.exam2 }}
                </a>
            </li>
            {% else %}
            <li class="col-6 p-0">
                <a class="p-1 dropdown-item text-nowrap text-center" href=""
                   hx-get="{% url 'psat:problem_list' year='전체' ex=t.ex sub=url.sub %}">
                    {{ t.exam2 }}
                </a>
            </li>
            {% endif %}
        {% endfor %}
        </div>
    </ul>
{% endpartial %}

{% startpartial like %}
    <a id="dropdownLikeLink{{ info.category }}" href="" role="button"
       class="btn btn-sm btn-outline-primary dropdown-toggle"
       data-bs-toggle="dropdown" aria-expanded="false">
        {{ PSAT_ICON_SET.filter|safe }}
    </a>
    <ul class="dropdown-menu" aria-labelledby="dropdownLikeLink{{ info.category }}"
        hx-target="#navContent{{ info.category|default:0 }}" hx-swap="innerHTML swap:0.25s">
        <li>
            <a class="dropdown-item text-center{% if info.is_liked is None %} active{% endif %}"
               hx-get="{% url 'psat:like_list_sub' sub=info.sub %}" href="">
                {{ PSAT_ICON_SET.filterAll|safe }} 즐겨찾기 전체 문제
            </a>
        </li>
        <li>
            <a class="dropdown-item text-center{% if info.is_liked == '1' %} active{% endif %}"
               hx-get="{% url 'psat:like_list_opt_sub' is_liked=1 sub=info.sub %}" href="">
                {{ PSAT_ICON_SET.likeTrue|safe }} 즐겨찾기 추가 문제
            </a>
        </li>
        <li>
            <a class="dropdown-item text-center{% if info.is_liked == '0' %} active{% endif %}"
               hx-get="{% url 'psat:like_list_opt_sub' is_liked=0 sub=info.sub %}" href="">
                {{ PSAT_ICON_SET.likeFalse|safe }} 즐겨찾기 제외 문제
            </a>
        </li>
    </ul>
{% endpartial %}

{% startpartial rate %}
    <a id="dropdownRateLink{{ info.category }}" href="" role="button"
       class="btn btn-sm btn-outline-primary dropdown-toggle"
       data-bs-toggle="dropdown" aria-expanded="false">
        {{ PSAT_ICON_SET.filter|safe }}
    </a>
    <ul class="dropdown-menu" aria-labelledby="dropdownRateLink{{ info.category }}"
        hx-target="#navContent{{ info.category|default:0 }}" hx-swap="innerHTML swap:0.25s">
        <li>
            <a class="dropdown-item text-center{% if info.star_count is None %} active{% endif %}"
               hx-get="{% url 'psat:rate_list_sub' sub=info.sub %}" href="">
                {{ PSAT_ICON_SET.filterAll|safe }} 전체 문제
            </a>
        </li>
        <li>
            <a class="dropdown-item text-center{% if info.star_count == '1' %} active{% endif %}"
               hx-get="{% url 'psat:rate_list_opt_sub' star_count=1 sub=info.sub %}" href="">
                {{ PSAT_ICON_SET.star1|safe }}
            </a>
        </li>
        <li>
            <a class="dropdown-item text-center{% if info.star_count == '2' %} active{% endif %}"
               hx-get="{% url 'psat:rate_list_opt_sub' star_count=2 sub=info.sub %}" href="">
                {{ PSAT_ICON_SET.star2|safe }}
            </a>
        </li>
        <li>
            <a class="dropdown-item text-center{% if info.star_count == '3' %} active{% endif %}"
               hx-get="{% url 'psat:rate_list_opt_sub' star_count=3 sub=info.sub %}" href="">
                {{ PSAT_ICON_SET.star3|safe }}
            </a>
        </li>
        <li>
            <a class="dropdown-item text-center{% if info.star_count == '4' %} active{% endif %}"
               hx-get="{% url 'psat:rate_list_opt_sub' star_count=4 sub=info.sub %}" href="">
                {{ PSAT_ICON_SET.star4|safe }}
            </a>
        </li>
        <li>
            <a class="dropdown-item text-center{% if info.star_count == '5' %} active{% endif %}"
               hx-get="{% url 'psat:rate_list_opt_sub' star_count=5 sub=info.sub %}" href="">
                {{ PSAT_ICON_SET.star5|safe }}
            </a>
        </li>
    </ul>
{% endpartial %}

{% startpartial answer %}
    <a id="dropdownAnswerLink{{ info.category }}" href="" role="button"
       class="btn btn-sm btn-outline-primary dropdown-toggle"
       data-bs-toggle="dropdown" aria-expanded="false">
        {{ PSAT_ICON_SET.filter|safe }}
    </a>
    <ul class="dropdown-menu" aria-labelledby="dropdownAnswerLink{{ info.category }}"
        hx-target="#navContent{{ info.category|default:0 }}" hx-swap="innerHTML swap:0.25s">
        <li>
            <a class="dropdown-item text-center{% if info.is_correct is None %} active{% endif %}"
               hx-get="{% url 'psat:answer_list_sub' sub=info.sub %}" href="">
                {{ PSAT_ICON_SET.filterAll|safe }} 전체 문제
            </a>
        </li>
        <li>
            <a class="dropdown-item text-center{% if info.is_correct == '1' %} active{% endif %}"
               hx-get="{% url 'psat:answer_list_opt_sub' is_correct=1 sub=info.sub %}" href="">
                {{ PSAT_ICON_SET.answerTrue|safe }} 맞힌 문제
            </a>
        </li>
        <li>
            <a class="dropdown-item text-center{% if info.is_correct == '0' %} active{% endif %}"
               hx-get="{% url 'psat:answer_list_opt_sub' is_correct=0 sub=info.sub %}" href="">
                {{ PSAT_ICON_SET.answerFalse|safe }} 틀린 문제
            </a>
        </li>
    </ul>
{% endpartial %}

<div class="input-group dropdown" role="option">
    {% if info.type == 'problemList' %}
        {% partial problem %}
    {% elif info.type == 'likeList' %}
        {% partial like %}
    {% elif info.type == 'rateList' %}
        {% partial rate %}
    {% elif info.type == 'answerList' %}
        {% partial answer %}
    {% endif %}
</div><!-- List Filter End -->
