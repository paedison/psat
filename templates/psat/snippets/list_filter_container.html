{% load static %}
{% load psat_filter %}
{% load partials %}

{% startpartial problem %}
    <a class="btn btn-sm btn-outline-primary dropdown-toggle" href="" role="button" id="dropdownYearLink{{ info.sub_code }}" data-bs-toggle="dropdown" aria-expanded="false">
        {{ PSAT_ICON_SET.filter|safe }}
    </a>
    <ul class="dropdown-menu" aria-labelledby="dropdownYearLink{{ info.sub_code }}">
        <div class="d-flex col-12 col-lg-4 flex-wrap justify-content-start" style="min-width: 300px;">
        {% if url.year == '전체' %}
            <li class="col-3 p-0">
                <a class="p-1 dropdown-item list-filter text-nowrap text-center active" href="{% url 'psat:problem_list' year='전체' ex='전체' sub=url.sub %}">전체 연도</a>
            </li>
        {% else %}
            <li class="col-3 p-0">
                <a class="p-1 dropdown-item list-filter text-nowrap text-center" href="{% url 'psat:problem_list' year='전체' ex='전체' sub=url.sub %}">전체 연도</a>
            </li>
        {% endif %}
        {% for t in TOTAL.year_list %}
            {% if t == url.year %}
            <li class="col-3 p-0">
                <a class="p-1 dropdown-item list-filter text-nowrap text-center active" href="{% url 'psat:problem_list' year=t ex='전체' sub=url.sub %}">{{ t }}년</a>
            </li>
            {% else %}
            <li class="col-3 p-0">
                <a class="p-1 dropdown-item list-filter text-nowrap text-center" href="{% url 'psat:problem_list' year=t ex='전체' sub=url.sub %}">{{ t }}년</a>
            </li>
            {% endif %}
        {% endfor %}
        </div>
    </ul>

    <a class="btn btn-outline-primary btn-sm dropdown-toggle" href="" role="button" id="dropdownExamLink{{ info.sub_code }}" data-bs-toggle="dropdown" aria-expanded="false">
        {{ PSAT_ICON_SET.filter|safe }}
    </a>
    <ul class="dropdown-menu" aria-labelledby="dropdownExamLink{{ info.sub_code }}">
        <div class="d-flex col-12 col-lg-4 flex-wrap justify-content-start" style="min-width: 300px;">
        {% if url.ex == '전체' %}
            <li class="col-6 p-0">
                <a class="p-1 dropdown-item list-filter text-nowrap text-center active" href="{% url  'psat:problem_list' year='전체' ex='전체' sub=url.sub %}">전체 시험</a>
            </li>
        {% else %}
            <li class="col-6 p-0">
                <a class="p-1 dropdown-item list-filter text-nowrap text-center" href="{% url  'psat:problem_list' year='전체' ex='전체' sub=url.sub %}">전체 시험</a>
            </li>
        {% endif %}
        {% for t in TOTAL.exam_list %}
            {% if t.ex == url.ex %}
            <li class="col-6 p-0">
                <a class="p-1 dropdown-item list-filter text-nowrap text-center active" href="{% url 'psat:problem_list' year='전체' ex=t.ex sub=url.sub %}">{{ t.exam2 }}</a>
            </li>
            {% else %}
            <li class="col-6 p-0">
                <a class="p-1 dropdown-item list-filter text-nowrap text-center" href="{% url 'psat:problem_list' year='전체' ex=t.ex sub=url.sub %}">{{ t.exam2 }}</a>
            </li>
            {% endif %}
        {% endfor %}
        </div>
    </ul>
{% endpartial %}

{% startpartial like %}
    <a class="btn btn-sm btn-primary dropdown-toggle" href="" role="button" id="dropdownLikeLink{{ info.sub_code }}" data-bs-toggle="dropdown" aria-expanded="false">
        {{ PSAT_ICON_SET.filter|safe }}
    </a>
    <ul class="dropdown-menu" aria-labelledby="dropdownLikeLink{{ info.sub_code }}">
        <li>
            <a class="list-filter dropdown-item text-center{% if info.is_liked is None %} active{% endif %}" href="{% url 'psat:like_list_sub' sub=info.sub %}">
                <i class="fa-regular fa-file-lines mr-2"></i>즐겨찾기 전체 문제
            </a>
        </li>
        <li>
            <a class="list-filter dropdown-item text-center{% if info.is_liked == '1' %} active{% endif %}" href="{% url 'psat:like_list_opt_sub' is_liked=1 sub=info.sub %}">
                <i class="fa-solid fa-heart mr-2"></i>즐겨찾기 추가 문제
            </a>
        </li>
        <li>
            <a class="list-filter dropdown-item text-center{% if info.is_liked == '0' %} active{% endif %}" href="{% url 'psat:like_list_opt_sub' is_liked=0 sub=info.sub %}">
                <i class="fa-regular fa-heart mr-2"></i>즐겨찾기 제외 문제
            </a>
        </li>
    </ul>
{% endpartial %}

{% startpartial rate %}
    <a class="btn btn-sm btn-primary dropdown-toggle" href="" role="button" id="dropdownRateLink" data-bs-toggle="dropdown" aria-expanded="false">
        {{ PSAT_ICON_SET.filter|safe }}
    </a>
    <ul class="dropdown-menu" aria-labelledby="dropdownRateLink">
        <li>
            <a class="list-filter dropdown-item text-center{% if info.star_count is None %} active{% endif %}" href="{% url 'psat:rate_list_sub' sub=info.sub %}">
                <i class="fa-regular fa-file-lines mr-2"></i>전체 문제
            </a>
        </li>
        <li>
            <a class="list-filter dropdown-item text-center{% if info.star_count == '1' %} active{% endif %}" href="{% url 'psat:rate_list_opt_sub' star_count=1 sub=info.sub %}">
                <i class="fa-solid fa-star"></i><i class="fa-regular fa-star"></i><i class="fa-regular fa-star"></i><i class="fa-regular fa-star"></i><i class="fa-regular fa-star"></i>
            </a>
        </li>
        <li>
            <a class="list-filter dropdown-item text-center{% if info.star_count == '2' %} active{% endif %}" href="{% url 'psat:rate_list_opt_sub' star_count=2 sub=info.sub %}">
                <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-regular fa-star"></i><i class="fa-regular fa-star"></i><i class="fa-regular fa-star"></i>
            </a>
        </li>
        <li>
            <a class="list-filter dropdown-item text-center{% if info.star_count == '3' %} active{% endif %}" href="{% url 'psat:rate_list_opt_sub' star_count=3 sub=info.sub %}">
                <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-regular fa-star"></i><i class="fa-regular fa-star"></i>
            </a>
        </li>
        <li>
            <a class="list-filter dropdown-item text-center{% if info.star_count == '4' %} active{% endif %}" href="{% url 'psat:rate_list_opt_sub' star_count=4 sub=info.sub %}">
                <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-regular fa-star"></i>
            </a>
        </li>
        <li>
            <a class="list-filter dropdown-item text-center{% if info.star_count == '5' %} active{% endif %}" href="{% url 'psat:rate_list_opt_sub' star_count=5 sub=info.sub %}">
                <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i>
            </a>
        </li>
    </ul>
{% endpartial %}

{% startpartial answer %}
    <a class="btn btn-sm btn-primary dropdown-toggle" href="" role="button" id="dropdownAnswerLink" data-bs-toggle="dropdown" aria-expanded="false">
        {{ PSAT_ICON_SET.filter|safe }}
    </a>
    <ul class="dropdown-menu" aria-labelledby="dropdownAnswerLink">
        <li>
            <a class="list-filter dropdown-item text-center{% if info.is_correct is None %} active{% endif %}" href="{% url 'psat:answer_list_sub' sub=info.sub %}">
                <i class="fa-regular fa-file-lines mr-2"></i>전체 문제
            </a>
        </li>
        <li>
            <a class="list-filter dropdown-item text-center{% if info.is_correct == '1' %} active{% endif %}" href="{% url 'psat:answer_list_opt_sub' is_correct=1 sub=info.sub %}">
                <i class="fa-solid fa-circle-check mr-2"></i>맞힌 문제
            </a>
        </li>
        <li>
            <a class="list-filter dropdown-item text-center{% if info.is_correct == '0' %} active{% endif %}" href="{% url 'psat:answer_list_opt_sub' is_correct=0 sub=info.sub %}">
                <i class="fa-solid fa-circle-xmark mr-2"></i>틀린 문제
            </a>
        </li>
    </ul>
{% endpartial %}

<div class="input-group dropdown" role="option">
    {% if info.type == 'problemList' %}
        {% partial problem %}
    {% elif info.type == 'likeList' %}
        {% partial like %}
    {% elif info.type == 'rateList' %}
        {% partial rate %}
    {% elif info.type == 'answerList' %}
        {% partial answer %}
    {% endif %}
</div><!-- List Filter End -->
