{% extends 'list.html' %}
{% load partials %}

{% block main %}
    {% partialdef list_main inline=True %}
        {{ info|json_script:'info' }}
        <div class="pagetitle">
            <h1>{{ icon_menu|safe }} PSAT
                <span class="fs-6 text-secondary">{{ title }}</span>
            </h1>
            <nav>
                <ol class="breadcrumb" hx-target="#main" hx-swap="innerHTML swap:0.25s" hx-push-url="true">
                    <li class="breadcrumb-item">
                        <a href="{% url 'index' %}" hx-post="{% url 'index' %}">Home</a>
                    </li>
                    {% if info.view_type %}
                        <li class="breadcrumb-item">PSAT</li>
                        <li class="breadcrumb-item active">{{ info.view_type|title }}</li>
                    {% else %}
                        <li class="breadcrumb-item active">PSAT</li>
                    {% endif %}
                </ol>
            </nav>
        </div><!-- Page Title End -->

        <section class="section">
            <div class="row">
                <div class="col-12" aria-label="문제 목록">
                    <div id="problemCard" class="card htmx-fade-in htmx-fade-out"
                         hx-target="#main" hx-swap="innerHTML swap:0.25s show:window:top">
                        {% include 'psat/v4/snippets/problem_container.html' %}
                    </div>
                </div>

                {% if user.is_admin %}
                    <div class="col-12" aria-label="문제 목록">
<a id="toggleProblemBtn" class="btn btn-warning px-2"
   hx-target="#problemCard" hx-swap="innerHTML swap:0.25s"
   hx-get="{% url 'psat:list' %}">
    <i class="fa-solid fa-layer-group fa-fw text-white"></i>
</a>
<script>
    $(document).ready(function() {
        $('#toggleProblemBtn').click(function() {
            $('#floatingCollection').removeClass('show-menu');
            $('#toggleCollectionBtn').show().animate({right: '20'}, 300);
        });
    });
</script>
                    </div>

                    <div class="col-12" aria-label="질문 리스트">
                        {% include 'psat/v4/snippets/comment_list.html' %}
                    </div>

                    <div class="col-12" aria-label="문제 컬렉션">
                        {% include 'psat/v4/snippets/collection_list.html' %}
                    </div>
                {% endif %}
            </div>
        </section>
    {% endpartialdef list_main %}
{% endblock main %}
